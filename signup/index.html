<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Flow IQ | Complete Business Management Platform</title>
    <meta name="description" content="Create your Flow IQ account and start managing your entire business with our unified ERP platform. 30-day free trial, no credit card required.">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Sign Up for Flow IQ — Complete Business Management Platform">
    <meta property="og:description" content="Create your Flow IQ account and start managing your entire business with our unified ERP platform.">
    <!-- Favicon - Multiple formats for maximum browser compatibility -->
    <link rel="icon" type="image/png" href="/flowiq-logo.png">
    <link rel="icon" type="image/x-icon" href="/favicon.ico?v=3">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3">
    <link rel="apple-touch-icon" href="/flowiq-logo.png">
    <link rel="alternate icon" type="image/x-icon" href="/favicon.ico?v=3">
    <!-- Preconnect to ensure favicon loads quickly -->
    <link rel="preconnect" href="https://www.flowiq.info">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Cache busting to ensure updated code loads -->
    <script>
        console.log('Signup page loaded - version 3.9 (strict password policy + real-time validation)');
    </script>
    <style>
        .bg-freight-slate { background-color: #0f172a; }
        .bg-freight-slate-light { background-color: #1e293b; }
        .text-freight-orange { color: #f97316; }
        .bg-freight-orange { background-color: #f97316; }
        .hover\:bg-freight-orange-dark:hover { background-color: #ea580c; }
        .border-freight-orange { border-color: #f97316; }
        .gradient-bg {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
        }
        .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        /* Error state styling */
        .field-error {
            border-color: #ef4444 !important;
            background-color: rgba(239, 68, 68, 0.1) !important;
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2) !important;
        }
        .field-error:focus {
            border-color: #ef4444 !important;
            ring-color: rgba(239, 68, 68, 0.2) !important;
        }
        .error-message {
            color: #f87171;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
    </style>
    <link rel="stylesheet" href="/flowiq-light.css?v=1">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="gradient-bg min-h-screen text-slate-100">
    <!-- Navigation: full site menu (same as homepage, pricing, etc.) -->
    <nav class="fixed w-full z-50 bg-white/95 backdrop-blur-md border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/" aria-label="Flow IQ home" class="flex items-center gap-2">
                        <img src="/flowiq-logo.png" alt="FlowIQ - Smarter business in motion" class="h-[52px] w-auto max-w-[205px] object-contain" width="205" height="52" loading="eager">
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="/" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Home</a>
                    <a href="/who-flowiq-is-for.html" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Who it's for</a>
                    <a href="/modules.html" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Modules</a>
                    <a href="/pricing.html" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Pricing</a>
                    <a href="/brochure.html" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Brochure</a>
                    <a href="https://app.flowiq.info/" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Login</a>
                    <a href="/book-demo.html" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Book a Demo</a>
                    <a href="https://app.flowiq.info/login" class="text-slate-600 hover:text-orange-600 font-medium transition-colors">Already have an account? Sign In</a>
                    <a href="/signup" class="bg-freight-orange hover:bg-freight-orange-dark text-white px-5 py-2.5 rounded-lg font-semibold shadow-sm transition-all hover:shadow-md">Start your 30-day free trial</a>
                </div>
                <button id="mobileMenuBtn" class="md:hidden p-2 text-slate-600 hover:text-slate-900" aria-label="Open menu">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
        <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200 bg-white absolute w-full left-0 top-16">
            <div class="px-4 py-4 space-y-4 shadow-lg">
                <a href="/" class="block text-slate-600 hover:text-orange-600 font-medium">Home</a>
                <a href="/who-flowiq-is-for.html" class="block text-slate-600 hover:text-orange-600 font-medium">Who it's for</a>
                <a href="/modules.html" class="block text-slate-600 hover:text-orange-600 font-medium">Modules</a>
                <a href="/pricing.html" class="block text-slate-600 hover:text-orange-600 font-medium">Pricing</a>
                <a href="/brochure.html" class="block text-slate-600 hover:text-orange-600 font-medium">Brochure</a>
                <a href="https://app.flowiq.info/" class="block text-slate-600 hover:text-orange-600 font-medium">Login</a>
                <a href="/book-demo.html" class="block text-slate-600 hover:text-orange-600 font-medium">Book a Demo</a>
                <a href="https://app.flowiq.info/login" class="block text-slate-600 hover:text-orange-600 font-medium">Already have an account? Sign In</a>
                <a href="/signup" class="block bg-freight-orange text-white px-4 py-2 rounded-lg text-center font-medium">Start your 30-day free trial</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-16 min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-8">
            <!-- Header -->
            <div class="text-center">
                <div class="mx-auto h-16 w-16 bg-freight-orange/20 rounded-full flex items-center justify-center mb-6">
                    <i data-lucide="building-2" class="text-freight-orange" style="width:32px;height:32px"></i>
                </div>
                <h2 class="text-3xl font-bold text-white mb-2">Create Your Account</h2>
                <p class="text-slate-300">Start your 30-day free trial. No credit card required. Your data stays. Upgrade only if it adds value.</p>
            </div>

            <!-- Plan Selection (optional) -->
            <div id="planCard" class="bg-freight-slate-light/70 rounded-xl border border-slate-700 p-5">
                <div class="flex items-start justify-between gap-4">
                    <div>
                        <div class="flex items-center gap-2">
                            <i data-lucide="layers" class="text-freight-orange" style="width:18px;height:18px"></i>
                            <h3 class="text-white font-semibold">Choose a plan</h3>
                        </div>
                        <p class="text-slate-300 text-sm mt-1">Pick what you want to start with — you can change plans anytime during your trial.</p>
                    </div>
                    <a class='text-sm text-slate-300 hover:text-white transition-colors whitespace-nowrap' href='/pricing'>View pricing</a>
                </div>

                <div class="mt-4 grid grid-cols-2 gap-3" role="radiogroup" aria-label="Select a FlowIQ plan">
                    <button type="button" class="plan-option border border-slate-600 hover:border-orange-500/70 rounded-lg px-4 py-3 text-left transition-all cursor-pointer focus:outline-none focus:ring-0 active:scale-[0.98]" data-plan="starter">
                        <div class="text-white font-semibold">Starter</div>
                        <div class="text-xs text-slate-300">Solo founders</div>
                    </button>
                    <button type="button" class="plan-option border border-slate-600 hover:border-orange-500/70 rounded-lg px-4 py-3 text-left transition-all cursor-pointer focus:outline-none focus:ring-0 active:scale-[0.98]" data-plan="growth">
                        <div class="text-white font-semibold">Growth</div>
                        <div class="text-xs text-slate-300">Small teams</div>
                    </button>
                    <button type="button" class="plan-option border border-slate-600 hover:border-orange-500/70 rounded-lg px-4 py-3 text-left transition-all cursor-pointer focus:outline-none focus:ring-0 active:scale-[0.98]" data-plan="professional">
                        <div class="text-white font-semibold">Professional</div>
                        <div class="text-xs text-slate-300">Established ops</div>
                    </button>
                    <button type="button" class="plan-option border border-slate-600 hover:border-orange-500/70 rounded-lg px-4 py-3 text-left transition-all cursor-pointer focus:outline-none focus:ring-0 active:scale-[0.98]" data-plan="scale">
                        <div class="text-white font-semibold">Scale</div>
                        <div class="text-xs text-slate-300">High volume</div>
                    </button>
                </div>

                <div class="mt-4 flex items-center justify-between gap-3">
                    <div class="text-sm text-slate-300">
                        Selected: <span id="selectedPlanName" class="text-white font-semibold">Growth</span>
                    </div>
                    <a class='text-sm text-slate-300 hover:text-white transition-colors' href='/#demo'>Enterprise? Request demo</a>
                </div>
            </div>

            <!-- Signup Form -->
            <div class="bg-freight-slate-light rounded-xl shadow-2xl p-8 border border-slate-700">
                <form id="signupForm" class="space-y-6">
                    <input type="hidden" id="selectedPlan" name="selectedPlan" value="growth" />
                    <!-- Company Information -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-white border-b border-slate-600 pb-2">Company Information</h3>
                        
                        <div>
                            <label for="companyName" class="block text-sm font-medium text-slate-300 mb-2">Company Name *</label>
                            <input 
                                id="companyName" 
                                name="companyName" 
                                type="text" 
                                required 
                                autocomplete="organization"
                                class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                                placeholder="Your Company Name"
                            >
                        </div>

                        <div>
                            <label for="industry" class="block text-sm font-medium text-slate-300 mb-2">Industry *</label>
                            <select 
                                id="industry" 
                                name="industry" 
                                required
                                class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                            >
                                <option value="">Select your industry</option>
                                <option value="freight-logistics">Freight & Logistics</option>
                                <option value="wholesale-distribution">Wholesale Distribution</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="retail">Retail</option>
                                <option value="import-export">Import/Export</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="employees" class="block text-sm font-medium text-slate-300 mb-2">Company Size *</label>
                                <select 
                                    id="employees" 
                                    name="employees" 
                                    required
                                    class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                                >
                                    <option value="">Select size</option>
                                    <option value="1-5">1-5 employees</option>
                                    <option value="6-15">6-15 employees</option>
                                    <option value="16-50">16-50 employees</option>
                                    <option value="51-200">51-200 employees</option>
                                    <option value="200+">200+ employees</option>
                                </select>
                            </div>

                            <div>
                                <label for="country" class="block text-sm font-medium text-slate-300 mb-2">Country *</label>
                                <select 
                                    id="country" 
                                    name="country" 
                                    required
                                    class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                                >
                                    <option value="">Select country</option>
                                    <option value="US">United States</option>
                                    <option value="CA">Canada</option>
                                    <option value="GB">United Kingdom</option>
                                    <option value="AU">Australia</option>
                                    <option value="ZA">South Africa</option>
                                    <option value="NZ">New Zealand</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Admin User Information -->
                    <div class="space-y-4">
                        <h3 class="text-lg font-semibold text-white border-b border-slate-600 pb-2">Admin User Details</h3>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="firstName" class="block text-sm font-medium text-slate-300 mb-2">First Name *</label>
                                <input 
                                    id="firstName" 
                                    name="firstName" 
                                    type="text" 
                                    required 
                                    autocomplete="given-name"
                                    class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                                    placeholder="John"
                                >
                            </div>

                            <div>
                                <label for="lastName" class="block text-sm font-medium text-slate-300 mb-2">Last Name *</label>
                                <input 
                                    id="lastName" 
                                    name="lastName" 
                                    type="text" 
                                    required 
                                    autocomplete="family-name"
                                    class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                                    placeholder="Smith"
                                >
                            </div>
                        </div>

                        <div>
                            <label for="email" class="block text-sm font-medium text-slate-300 mb-2">Work Email *</label>
                            <input 
                                id="email" 
                                name="email" 
                                type="email" 
                                required 
                                autocomplete="email"
                                class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                                placeholder="john@yourcompany.com"
                            >
                        </div>

                        <div>
                            <label for="phone" class="block text-sm font-medium text-slate-300 mb-2">Phone Number *</label>
                            <input 
                                id="phone" 
                                name="phone" 
                                type="tel" 
                                required
                                autocomplete="tel"
                                class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors"
                                placeholder="+1 (555) 123-4567"
                            >
                        </div>

                        <div>
                            <label for="password" class="block text-sm font-medium text-slate-300 mb-2">Password *</label>
                            <div class="relative">
                                <input 
                                    id="password" 
                                    name="password" 
                                    type="password" 
                                    required 
                                    autocomplete="new-password"
                                    class="w-full px-4 py-3 bg-freight-slate border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:border-freight-orange focus:outline-none focus:ring-2 focus:ring-freight-orange/20 transition-colors pr-12"
                                    placeholder="Create a strong password"
                                    minlength="8"
                                    pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$"
                                >
                                <button 
                                    type="button" 
                                    id="togglePassword" 
                                    class="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-white"
                                >
                                    <i data-lucide="eye" style="width:20px;height:20px"></i>
                                </button>
                            </div>
                            <div id="passwordRequirements" class="mt-2 space-y-1">
                                <p class="text-xs font-medium text-slate-300 mb-1">Password must contain:</p>
                                <ul class="text-xs space-y-0.5">
                                    <li id="req-length" class="text-slate-400 flex items-center gap-1">
                                        <i data-lucide="x" class="w-3 h-3"></i>
                                        <span>At least 8 characters</span>
                                    </li>
                                    <li id="req-lowercase" class="text-slate-400 flex items-center gap-1">
                                        <i data-lucide="x" class="w-3 h-3"></i>
                                        <span>One lowercase letter (a-z)</span>
                                    </li>
                                    <li id="req-uppercase" class="text-slate-400 flex items-center gap-1">
                                        <i data-lucide="x" class="w-3 h-3"></i>
                                        <span>One uppercase letter (A-Z)</span>
                                    </li>
                                    <li id="req-number" class="text-slate-400 flex items-center gap-1">
                                        <i data-lucide="x" class="w-3 h-3"></i>
                                        <span>One number (0-9)</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Legal acceptance (required) -->
                    <div class="space-y-3">
                        <div class="flex items-start gap-3">
                            <div class="relative flex-shrink-0 mt-0.5">
                                <input 
                                    id="terms" 
                                    name="terms" 
                                    type="checkbox" 
                                    required 
                                    class="sr-only"
                                >
                                <label for="terms" class="checkbox-label flex items-center justify-center w-5 h-5 bg-freight-slate border border-slate-600 rounded cursor-pointer transition-all duration-200 hover:border-freight-orange focus-within:ring-2 focus-within:ring-freight-orange focus-within:ring-opacity-20">
                                    <!-- FlowIQ tick (brand-style, stroked) -->
                                    <svg class="checkbox-icon w-3.5 h-3.5 text-freight-orange opacity-0 transition-opacity duration-200" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                        <path d="M4.6 10.4l3.1 3.1L15.6 5.9"></path>
                                    </svg>
                                </label>
                            </div>
                            <label for="terms" class="text-sm text-slate-300 cursor-pointer leading-relaxed flex-1">
                                I have read and agree to the <span class="text-freight-orange hover:underline">FlowIQ Terms and Conditions</span>.
                            </label>
                        </div>

                        <div class="flex items-start gap-3">
                            <div class="relative flex-shrink-0 mt-0.5">
                                <input 
                                    id="privacy" 
                                    name="privacy" 
                                    type="checkbox" 
                                    required 
                                    class="sr-only"
                                >
                                <label for="privacy" class="checkbox-label flex items-center justify-center w-5 h-5 bg-freight-slate border border-slate-600 rounded cursor-pointer transition-all duration-200 hover:border-freight-orange focus-within:ring-2 focus-within:ring-freight-orange focus-within:ring-opacity-20">
                                    <!-- FlowIQ tick (brand-style, stroked) -->
                                    <svg class="checkbox-icon w-3.5 h-3.5 text-freight-orange opacity-0 transition-opacity duration-200" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                        <path d="M4.6 10.4l3.1 3.1L15.6 5.9"></path>
                                    </svg>
                                </label>
                            </div>
                            <label for="privacy" class="text-sm text-slate-300 cursor-pointer leading-relaxed flex-1">
                                I have read and agree to the <span class="text-freight-orange hover:underline">FlowIQ Privacy Policy (POPIA)</span>.
                            </label>
                        </div>

                        <details class="rounded-lg border border-slate-700 bg-freight-slate p-3">
                            <summary class="cursor-pointer text-sm text-freight-orange">View FlowIQ Terms & Conditions + Privacy Policy (POPIA)</summary>
                            <div class="mt-3 max-h-56 overflow-auto whitespace-pre-wrap text-xs text-slate-200">
FLOWIQ

TERMS AND CONDITIONS OF USE

Last Updated: 8 January 2026
Governing Law: Republic of South Africa

⸻

IMPORTANT – LEGALLY BINDING AGREEMENT

By clicking “Create Account”, “Sign Up”, “Register”, or any similar action, you confirm that:
	•	You have read, understood, and agreed to these Terms and Conditions
	•	You are legally authorised to bind yourself or the entity you represent
	•	Your use of FlowIQ is entirely at your own risk

If you do not agree, do not use the Platform.

⸻

1. DEFINITIONS

“Platform” means the FlowIQ software platform, including all modules, dashboards, tools, AI components, calculations, reports, forecasts, integrations, and interfaces.

“Company” means FlowIQ (Pty) Ltd, including its directors, officers, shareholders, employees, contractors, licensors, and agents.

“User” means any individual or entity accessing or using the Platform.

“Data” means all information uploaded, imported, entered, processed, generated, or exported by the User.

⸻

2. PLATFORM PURPOSE – NO ADVICE

FlowIQ is provided solely as a software-as-a-service (SaaS) tool.

FlowIQ does not provide:
	•	Financial advice
	•	Accounting advice
	•	Tax advice
	•	Legal advice
	•	Logistics advice
	•	Business or commercial advice

All outputs, calculations, analytics, projections, insights, recommendations, and reports are:
	•	Informational only
	•	Indicative
	•	Dependent entirely on user-supplied data
	•	Not guaranteed to be accurate, complete, or fit for any purpose

The User remains fully and solely responsible for:
	•	Verifying all outputs
	•	Consulting qualified professionals
	•	All decisions, actions, and consequences arising from Platform use

⸻

3. USER DATA RESPONSIBILITY

The User:
	•	Warrants they have the legal right to upload and use all Data
	•	Accepts full responsibility for the accuracy, completeness, and legality of all Data
	•	Acknowledges that incorrect or incomplete Data will produce incorrect outputs

The Company does not audit, validate, or verify User Data.

⸻

4. DATA STORAGE, SECURITY & LOSS

While reasonable technical and organisational safeguards are applied:

The Company does not warrant that:
	•	Data will be error-free
	•	Data will not be lost, corrupted, delayed, or accessed unlawfully
	•	The Platform will be uninterrupted or fully secure

The User expressly acknowledges that:
	•	Data loss may occur
	•	Backups are the User’s responsibility
	•	FlowIQ is not a system of record

⸻

5. AI, AUTOMATION & FORECASTING DISCLAIMER

Where the Platform uses:
	•	Artificial intelligence
	•	Automation
	•	Forecasting
	•	Predictive analytics
	•	Optimisation logic

Such outputs:
	•	Are probabilistic and non-deterministic
	•	May be incomplete, inaccurate, or misleading
	•	Must never be relied upon as guarantees or factual outcomes

The User assumes all risk arising from reliance on AI-assisted or automated outputs.

⸻

6. LIMITATION OF LIABILITY (CRITICAL)

To the maximum extent permitted by law, the Company shall not be liable for any:
	•	Loss of income
	•	Loss of profits
	•	Loss of business or contracts
	•	Loss of data
	•	Loss of goodwill
	•	Business interruption
	•	Indirect, incidental, special, or consequential damages
	•	Errors, omissions, or inaccuracies
	•	Decisions made based on Platform outputs
	•	Failures of third-party services or integrations

Total aggregate liability, if any, is strictly limited to:

➡ The fees actually paid by the User to FlowIQ in the preceding three (3) months

If no fees were paid:

➡ Total liability is zero

⸻

7. INDEMNITY

The User indemnifies and holds harmless the Company against all claims, damages, losses, costs, and legal expenses arising from or related to:
	•	Use of the Platform
	•	Reliance on any outputs
	•	Uploaded or processed Data
	•	Breach of these Terms
	•	Claims by third parties

⸻

8. AVAILABILITY & CHANGES

The Company may:
	•	Modify, suspend, or discontinue any feature at any time
	•	Deploy updates or changes without notice
	•	Alter functionality, logic, or availability

No uptime, availability, or feature-continuity guarantees are provided.

⸻

9. THIRD-PARTY SERVICES

The Platform may integrate with third-party services.

The Company:
	•	Does not control third-party systems
	•	Makes no warranties regarding them
	•	Bears no liability for third-party failures, interruptions, or losses

⸻

10. CONFIDENTIALITY & INTELLECTUAL PROPERTY

All Platform logic, calculations, architecture, workflows, designs, and documentation are proprietary and confidential.

The User may not:
	•	Reverse engineer
	•	Copy, resell, or sublicense
	•	Extract or replicate logic
	•	Use the Platform to compete

⸻

11. TERMINATION

The Company may suspend or terminate access:
	•	For breach of these Terms
	•	For misuse
	•	For risk exposure
	•	At its sole discretion

All disclaimers, limitations, and indemnities survive termination.

⸻

12. GOVERNING LAW & JURISDICTION

These Terms are governed by the laws of the Republic of South Africa.

The courts of South Africa have exclusive jurisdiction.

⸻

13. SEVERABILITY

If any provision is found unenforceable, the remaining provisions remain fully enforceable.

⸻

14. ENTIRE AGREEMENT

These Terms constitute the entire agreement between the User and the Company and override all prior discussions or representations.

⸻

15. CONTACT

Legal notices:
info@flowiq.co.za


⸻

ENTERPRISE & CUSTOM AGREEMENTS

Notwithstanding anything in these Terms:
	•	Enterprise or high-value clients may be subject to a separately negotiated written agreement
	•	Only a document signed by an authorised director of FlowIQ may override these Terms
	•	Verbal assurances, emails, proposals, or sales discussions do not modify liability
	•	In the event of conflict, the signed enterprise agreement prevails only for that client

All other provisions remain fully enforceable.


FLOWIQ

PRIVACY POLICY (POPIA)

Last Updated: 8 January 2026
Applicable Law: Protection of Personal Information Act, 4 of 2013 (POPIA)

⸻

1. PURPOSE

FlowIQ respects user privacy and processes personal information in accordance with POPIA.

This policy explains how personal information is collected, used, stored, and protected.

⸻

2. INFORMATION WE COLLECT

FlowIQ may process:
	•	Account details (name, email, company name)
	•	Login credentials (encrypted)
	•	Usage and interaction data
	•	Business and operational data uploaded by users
	•	Technical data (IP address, browser type, device data)

FlowIQ does not verify the accuracy of uploaded data.

⸻

3. PURPOSE OF PROCESSING

Personal information is processed to:
	•	Provide and operate the Platform
	•	Authenticate users
	•	Improve performance and features
	•	Communicate service-related notices
	•	Comply with legal obligations

⸻

4. DATA OWNERSHIP
	•	Users retain ownership of all uploaded data
	•	FlowIQ acts as a data operator, not a data owner
	•	Users confirm they have lawful authority to upload all data

⸻

5. DATA SECURITY

FlowIQ implements reasonable technical and organisational safeguards.

However:
	•	No system is completely secure
	•	FlowIQ does not guarantee prevention of breaches or data loss
	•	Users remain responsible for backups and redundancy

⸻

6. DATA RETENTION
	•	Data is retained only as long as necessary for platform operation or legal compliance
	•	Upon account termination, data may be deleted or anonymised at FlowIQ’s discretion unless legally required otherwise

⸻

7. DATA SHARING

FlowIQ:
	•	Does not sell personal data
	•	May share data with trusted service providers strictly for platform operation
	•	May disclose data if legally required

⸻

8. USER RIGHTS (POPIA)

Users may request to:
	•	Access personal data
	•	Correct inaccurate data
	•	Delete personal data (subject to legal limits)

Requests can be sent to:
legal@flowiq.co.za

⸻

9. LIMITATION

FlowIQ is not responsible for:
	•	Data uploaded by users about third parties
	•	User misuse of personal information
	•	Compliance failures caused by user actions

⸻

10. CHANGES

This policy may be updated at any time. Continued use constitutes acceptance.

⸻
                            </div>
                        </details>
                    </div>

                    <!-- Submit Button -->
                    <button 
                        type="submit" 
                        id="submitButton"
                        class="w-full bg-freight-orange hover:bg-freight-orange-dark text-white py-3 px-4 rounded-lg font-semibold text-lg transition-all transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-freight-orange/20 disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        <span id="buttonText">Start Your Free Trial</span>
                        <div id="loadingSpinner" class="hidden inline-block ml-2">
                            <div class="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                        </div>
                    </button>
                    <p class="mt-2 text-center text-xs text-slate-400">
                        Selected: <span id="selectedPlanInline" class="text-slate-200 font-semibold">Growth</span> <span class="text-slate-500">• change anytime</span>
                    </p>

                    <!-- Error/Success Messages -->
                    <div id="message" class="hidden p-4 rounded-lg"></div>
                </form>

                <!-- Social Proof -->
                <div class="mt-8 pt-6 border-t border-slate-600">
                    <div class="text-center">
                        <p class="text-sm text-slate-400 mb-3">Trusted by growing businesses worldwide</p>
                        <div class="flex items-center justify-center space-x-6 text-slate-500">
                            <div class="flex items-center space-x-2">
                                <i data-lucide="shield-check" class="text-green-500" style="width:16px;height:16px"></i>
                                <span class="text-xs">Bank-level security</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <i data-lucide="clock" class="text-blue-500" style="width:16px;height:16px"></i>
                                <span class="text-xs">Live in 24 hours</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <i data-lucide="star" class="text-yellow-500" style="width:16px;height:16px"></i>
                                <span class="text-xs">30-day free trial</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Lucide icons
            if (window.lucide) { window.lucide.createIcons(); }

            // Mobile nav toggle (same as rest of site)
            document.getElementById('mobileMenuBtn')?.addEventListener('click', function() {
                var menu = document.getElementById('mobileMenu');
                if (menu) menu.classList.toggle('hidden');
            });

            // Initialize Supabase
            // IMPORTANT: Do not name this variable `supabase` because the Supabase UMD bundle
            // declares a global `supabase` identifier. Re-declaring it here will hard-crash
            // this entire script block (and break plan selection, submission, etc).
            const supabaseUrl = 'https://yvbhjlmvpipniedwvdji.supabase.co';
            // IMPORTANT: Supabase Edge Functions require a JWT in the Authorization header.
            // Use the project's anon key (JWT), NOT the sb_publishable_* key.
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl2YmhqbG12cGlwbmllZHd2ZGppIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwNzcxODAsImV4cCI6MjA2MzY1MzE4MH0.nnITbcUjg_J33oK_1JCU82wMTr5Ko501JEHSW_3medw';
        // NOTE: This marketing signup page does not need a Supabase JS client instance.
        // Creating one via the CDN bundle was crashing the page in production, which prevented
        // plan selection + checkbox visuals + password toggle from working.

            // Plan preselection (pricing -> signup). Safe: does NOT change backend signup payload.
            ;(function initPlanSelection() {
            const allowedPlans = ['starter', 'growth', 'professional', 'scale'];
            const planLabels = {
                starter: 'Starter',
                growth: 'Growth',
                professional: 'Professional',
                scale: 'Scale'
            };
            const planCtaLabels = {
                starter: 'Start Starter Free Trial',
                growth: 'Start Growth Free Trial',
                professional: 'Start Professional Free Trial',
                scale: 'Start Scale Free Trial'
            };

            const params = new URLSearchParams(window.location.search || '');
            const paramPlan = (params.get('plan') || '').toLowerCase();
            const storedPlan = (localStorage.getItem('flowiq_selected_plan') || '').toLowerCase();

            let activePlan = allowedPlans.includes(paramPlan) ? paramPlan : (allowedPlans.includes(storedPlan) ? storedPlan : 'growth');

            const selectedPlanInput = document.getElementById('selectedPlan');
            const selectedPlanName = document.getElementById('selectedPlanName');
            const selectedPlanInline = document.getElementById('selectedPlanInline');
            const planButtons = Array.from(document.querySelectorAll('.plan-option[data-plan]'));
            const buttonTextEl = document.getElementById('buttonText');

            function render() {
                // Always ensure hidden input has the current plan value
                if (selectedPlanInput) {
                    selectedPlanInput.value = activePlan;
                    // Double-check it was set
                    if (!selectedPlanInput.value || selectedPlanInput.value.trim() === '') {
                        selectedPlanInput.value = activePlan || 'growth';
                    }
                }
                if (selectedPlanName) selectedPlanName.textContent = planLabels[activePlan] || 'Growth';
                if (selectedPlanInline) selectedPlanInline.textContent = planLabels[activePlan] || 'Growth';
                planButtons.forEach((btn) => {
                    const btnPlan = (btn.getAttribute('data-plan') || '').toLowerCase();
                    const isActive = btnPlan === activePlan;
                    // Reset all styles
                    btn.style.borderColor = '';
                    btn.style.backgroundColor = '';
                    btn.style.boxShadow = '';
                    btn.classList.remove('border-freight-orange', 'bg-freight-orange/10', 'border-slate-600');
                    // Apply active styles
                    if (isActive) {
                        btn.classList.add('border-freight-orange', 'bg-freight-orange/10');
                        btn.style.borderColor = '#f97316';
                        btn.style.backgroundColor = 'rgba(249, 115, 22, 0.1)';
                        btn.style.boxShadow = '0 0 0 2px rgba(249, 115, 22, 0.5), 0 0 12px rgba(249, 115, 22, 0.5)';
                    } else {
                        btn.classList.add('border-slate-600');
                        btn.style.borderColor = '#475569';
                    }
                });
                if (buttonTextEl) {
                    buttonTextEl.textContent = planCtaLabels[activePlan] || 'Start Your Free Trial';
                }
            }

            function setPlan(next) {
                if (!allowedPlans.includes(next)) return;
                activePlan = next;
                try { localStorage.setItem('flowiq_selected_plan', activePlan); } catch (_) {}
                render();
                // Explicitly verify the hidden input was updated
                const verifyInput = document.getElementById('selectedPlan');
                if (verifyInput && verifyInput.value !== activePlan) {
                    console.warn('Plan selection not persisted to hidden input, fixing...');
                    verifyInput.value = activePlan;
                }
            }

            planButtons.forEach((btn) => {
                btn.addEventListener('click', () => setPlan((btn.getAttribute('data-plan') || '').toLowerCase()));
            });

            render();
            })();

            // Password visibility toggle
            const togglePasswordBtn = document.getElementById('togglePassword');
            const passwordInput = document.getElementById('password');
            if (togglePasswordBtn && passwordInput) {
                togglePasswordBtn.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    const nextIcon = (passwordInput.type === 'password') ? 'eye-off' : 'eye';
                    passwordInput.type = (passwordInput.type === 'password') ? 'text' : 'password';

                    // Lucide replaces <i> with <svg>, so we re-render the <i> each time.
                    togglePasswordBtn.innerHTML = `<i data-lucide="${nextIcon}" style="width:20px;height:20px"></i>`;
                    if (window.lucide) { window.lucide.createIcons(); }
                };
            }

            // Real-time password strength validation
            function validatePasswordStrength(password) {
                const checks = {
                    length: password.length >= 8,
                    lowercase: /[a-z]/.test(password),
                    uppercase: /[A-Z]/.test(password),
                    number: /\d/.test(password)
                };
                return checks;
            }

            function updatePasswordRequirements(password) {
                const checks = validatePasswordStrength(password);
                const requirements = {
                    'req-length': checks.length,
                    'req-lowercase': checks.lowercase,
                    'req-uppercase': checks.uppercase,
                    'req-number': checks.number
                };

                Object.entries(requirements).forEach(([id, met]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        const icon = element.querySelector('i[data-lucide]');
                        if (icon) {
                            if (met) {
                                icon.setAttribute('data-lucide', 'check');
                                icon.classList.remove('text-slate-400');
                                icon.classList.add('text-green-500');
                                element.classList.remove('text-slate-400');
                                element.classList.add('text-green-400');
                            } else {
                                icon.setAttribute('data-lucide', 'x');
                                icon.classList.remove('text-green-500');
                                icon.classList.add('text-slate-400');
                                element.classList.remove('text-green-400');
                                element.classList.add('text-slate-400');
                            }
                            // Re-render Lucide icon
                            if (window.lucide) {
                                window.lucide.createIcons();
                            }
                        }
                    }
                });
            }

            // Add real-time password validation
            if (passwordInput) {
                // Initialize requirements display on page load
                updatePasswordRequirements('');
                
                passwordInput.addEventListener('input', function() {
                    updatePasswordRequirements(this.value);
                    // Clear error state when user starts typing
                    clearFieldError('password');
                });
            }

            // Custom checkbox behavior - simplified and robust
            function wireCustomCheckbox(id) {
                const checkbox = document.getElementById(id);
                if (!checkbox) return;
                
                const checkboxLabel = document.querySelector(`label.checkbox-label[for="${id}"]`);
                const svg = checkboxLabel ? checkboxLabel.querySelector('svg.checkbox-icon') : null;
                if (!svg) return;
                
                function updateCheckboxState() {
                    if (checkbox.checked) {
                        svg.style.opacity = '1';
                        svg.classList.remove('opacity-0');
                        svg.classList.add('opacity-100');
                    } else {
                        svg.style.opacity = '0';
                        svg.classList.remove('opacity-100');
                        svg.classList.add('opacity-0');
                    }
                }
                
                // Handle checkbox change
                checkbox.onchange = updateCheckboxState;
                
                // Handle clicks on checkbox label box
                if (checkboxLabel) {
                    checkboxLabel.onclick = function(e) {
                        e.preventDefault();
                        checkbox.checked = !checkbox.checked;
                        updateCheckboxState();
                    };
                }
                
                // Handle clicks on text label
                const textLabel = document.querySelector(`label[for="${id}"]:not(.checkbox-label)`);
                if (textLabel) {
                    textLabel.onclick = function(e) {
                        checkbox.checked = !checkbox.checked;
                        updateCheckboxState();
                    };
                }
                
                // Initial state
                updateCheckboxState();
            }
            
            // Wire checkboxes
            setTimeout(() => {
                wireCustomCheckbox('terms');
                wireCustomCheckbox('privacy');
            }, 100);

            // Field error highlighting functions
            const fieldMapping = {
                'email': 'email',
                'password': 'password',
                'company name': 'companyName',
                'company_name': 'companyName',
                'full name': ['firstName', 'lastName'],
                'first_name': 'firstName',
                'last_name': 'lastName',
                'first name': 'firstName',
                'last name': 'lastName',
                'industry': 'industry',
                'company size': 'employees',
                'employees': 'employees',
                'country': 'country',
                'phone number': 'phone',
                'phone': 'phone',
                'plan selection': 'selectedPlan',
                'selectedPlan': 'selectedPlan',
                'terms': 'terms',
                'privacy': 'privacy'
            };

            function highlightFieldError(fieldName) {
                const mappedField = fieldMapping[fieldName.toLowerCase()];
                if (!mappedField) {
                    // Try to find field by partial match
                    const lowerFieldName = fieldName.toLowerCase();
                    for (const [key, value] of Object.entries(fieldMapping)) {
                        if (lowerFieldName.includes(key) || key.includes(lowerFieldName)) {
                            const field = Array.isArray(value) ? document.getElementById(value[0]) : document.getElementById(value);
                            if (field) {
                                if (Array.isArray(value)) {
                                    value.forEach(id => highlightFieldById(id, fieldName));
                                } else {
                                    highlightFieldById(value, fieldName);
                                }
                                return;
                            }
                        }
                    }
                    return;
                }

                if (Array.isArray(mappedField)) {
                    // Handle fields that span multiple inputs (e.g., full name)
                    mappedField.forEach(id => highlightFieldById(id, fieldName));
                } else {
                    highlightFieldById(mappedField, fieldName);
                }
            }

            function highlightFieldById(fieldId, fieldName) {
                const field = document.getElementById(fieldId);
                if (!field) return;

                field.classList.add('field-error');
                
                // Special handling for plan selection
                if (fieldId === 'selectedPlan') {
                    const planCard = document.getElementById('planCard');
                    if (planCard && !planCard.querySelector('.error-message')) {
                        const errorMsg = document.createElement('p');
                        errorMsg.className = 'error-message mt-2';
                        errorMsg.textContent = 'Please select a plan';
                        planCard.appendChild(errorMsg);
                    }
                    // Also highlight plan buttons
                    document.querySelectorAll('.plan-option').forEach(btn => {
                        btn.style.borderColor = '#ef4444';
                        btn.style.boxShadow = '0 0 0 2px rgba(239, 68, 68, 0.2)';
                    });
                    return;
                }

                // Special handling for checkboxes
                if (fieldId === 'terms' || fieldId === 'privacy') {
                    const checkboxLabel = document.querySelector(`label[for="${fieldId}"]:not(.checkbox-label)`);
                    if (checkboxLabel && !checkboxLabel.querySelector('.error-message')) {
                        const errorMsg = document.createElement('span');
                        errorMsg.className = 'error-message block mt-1';
                        errorMsg.textContent = `Please accept the ${fieldId === 'terms' ? 'Terms and Conditions' : 'Privacy Policy'}`;
                        checkboxLabel.appendChild(errorMsg);
                    }
                    return;
                }

                // For regular input fields, add error message after the field
                if (!field.nextElementSibling?.classList.contains('error-message')) {
                    const errorMsg = document.createElement('p');
                    errorMsg.className = 'error-message';
                    let message = `Please enter ${fieldName}`;
                    if (fieldName.toLowerCase().includes('email')) {
                        message = 'Please enter a valid email address';
                    } else if (fieldName.toLowerCase().includes('password')) {
                        message = 'Password must be at least 8 characters';
                    }
                    errorMsg.textContent = message;
                    field.parentElement?.appendChild(errorMsg);
                }
            }

            function clearFieldError(fieldId) {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.classList.remove('field-error');
                    // Remove error message
                    const errorMsg = field.parentElement?.querySelector('.error-message');
                    if (errorMsg) {
                        errorMsg.remove();
                    }
                }
                
                // Special handling for plan selection
                if (fieldId === 'selectedPlan') {
                    const planCard = document.getElementById('planCard');
                    if (planCard) {
                        const errorMsg = planCard.querySelector('.error-message');
                        if (errorMsg) errorMsg.remove();
                    }
                    // Reset plan button styles
                    document.querySelectorAll('.plan-option').forEach(btn => {
                        btn.style.borderColor = '';
                        btn.style.boxShadow = '';
                    });
                }
            }

            function clearAllFieldErrors() {
                // Clear all field errors
                document.querySelectorAll('.field-error').forEach(el => {
                    el.classList.remove('field-error');
                });
                // Remove all error messages
                document.querySelectorAll('.error-message').forEach(el => {
                    el.remove();
                });
                // Reset plan button styles
                document.querySelectorAll('.plan-option').forEach(btn => {
                    btn.style.borderColor = '';
                    btn.style.boxShadow = '';
                });
            }

            // Add event listeners to clear errors when user interacts with fields
            const formFields = ['email', 'password', 'companyName', 'firstName', 'lastName', 'industry', 'employees', 'country', 'phone'];
            formFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', () => clearFieldError(fieldId));
                    field.addEventListener('change', () => clearFieldError(fieldId));
                }
            });

            // Clear plan selection error when user clicks a plan
            document.querySelectorAll('.plan-option').forEach(btn => {
                btn.addEventListener('click', () => {
                    clearFieldError('selectedPlan');
                    // Also clear any error message near the plan selection
                    const planCard = document.getElementById('planCard');
                    if (planCard) {
                        const errorMsg = planCard.querySelector('.error-message');
                        if (errorMsg) errorMsg.remove();
                    }
                });
            });

            // Clear checkbox errors when user checks them
            ['terms', 'privacy'].forEach(checkboxId => {
                const checkbox = document.getElementById(checkboxId);
                if (checkbox) {
                    checkbox.addEventListener('change', () => clearFieldError(checkboxId));
                }
            });

            // Form submission
            // IMPORTANT: Signup creates the account only. Users must manually sign in afterwards.
            console.log('Signup form initialized - login required after account creation');
            document.getElementById('signupForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitButton = document.getElementById('submitButton');
            const buttonText = document.getElementById('buttonText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const messageDiv = document.getElementById('message');
            
            // Clear previous errors
            clearAllFieldErrors();

            // Browser-native validity checks (required fields, type=email, etc).
            // Because we call preventDefault, we must trigger validation explicitly.
            if (typeof this.reportValidity === 'function' && !this.reportValidity()) {
                return;
            }

            // Show loading state
            submitButton.disabled = true;
            buttonText.textContent = 'Creating Account...';
            loadingSpinner.classList.remove('hidden');
            messageDiv.classList.add('hidden');

            try {
                const formData = new FormData(this);

                // Friendly email validation (common mistake: phone number entered into email)
                const emailValue = (formData.get('email') || '').toString().trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(emailValue)) {
                    highlightFieldError('email');
                    throw new Error('Please enter a valid email address (e.g., name@company.com). It looks like you entered a phone number or non-email text in the Work Email field.');
                }
                
                // Generate UUID for organization (required by database)
                const orgId = crypto.randomUUID();
                
                // Get selected plan - read directly from DOM element as fallback if FormData doesn't have it
                const selectedPlanInput = document.getElementById('selectedPlan');
                let selectedPlanValue = (selectedPlanInput?.value || formData.get('selectedPlan') || '').toString().trim().toLowerCase();
                
                // Fallback: if still empty, check the active plan from the plan selection state
                if (!selectedPlanValue) {
                    // Try to get from the active button
                    const activeButton = document.querySelector('.plan-option.border-freight-orange[data-plan]');
                    if (activeButton) {
                        selectedPlanValue = (activeButton.getAttribute('data-plan') || '').toLowerCase();
                    }
                }
                
                // Final fallback to 'growth' if still empty
                if (!selectedPlanValue || !['starter', 'growth', 'professional', 'scale'].includes(selectedPlanValue)) {
                    selectedPlanValue = 'growth';
                    // Update the hidden input for consistency
                    if (selectedPlanInput) selectedPlanInput.value = selectedPlanValue;
                }
                
                // Log for debugging
                console.log('Submitting with plan:', selectedPlanValue, 'from input:', selectedPlanInput?.value);
                
                // Client-side validation before submission
                const validationErrors = [];
                
                // Validate all required fields
                if (!formData.get('email') || !formData.get('email').toString().trim()) {
                    validationErrors.push('email');
                } else {
                    // Basic email format validation
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(formData.get('email').toString().trim())) {
                        validationErrors.push('email');
                    }
                }
                
                // Strict password validation
                const passwordValue = (formData.get('password') || '').toString();
                const passwordChecks = validatePasswordStrength(passwordValue);
                if (!passwordValue || !passwordChecks.length || !passwordChecks.lowercase || !passwordChecks.uppercase || !passwordChecks.number) {
                    validationErrors.push('password');
                    // Highlight password field
                    highlightFieldError('password');
                    // Show specific missing requirements
                    const missingReqs = [];
                    if (!passwordChecks.length) missingReqs.push('at least 8 characters');
                    if (!passwordChecks.lowercase) missingReqs.push('a lowercase letter');
                    if (!passwordChecks.uppercase) missingReqs.push('an uppercase letter');
                    if (!passwordChecks.number) missingReqs.push('a number');
                    
                    const passwordField = document.getElementById('password');
                    if (passwordField && !passwordField.nextElementSibling?.classList.contains('error-message')) {
                        const errorMsg = document.createElement('p');
                        errorMsg.className = 'error-message';
                        errorMsg.textContent = `Password must contain: ${missingReqs.join(', ')}`;
                        passwordField.parentElement?.appendChild(errorMsg);
                    }
                }
                
                if (!formData.get('companyName') || !formData.get('companyName').toString().trim()) {
                    validationErrors.push('company name');
                }
                
                if (!formData.get('firstName') || !formData.get('firstName').toString().trim()) {
                    validationErrors.push('first name');
                }
                
                if (!formData.get('lastName') || !formData.get('lastName').toString().trim()) {
                    validationErrors.push('last name');
                }
                
                if (!formData.get('industry') || !formData.get('industry').toString().trim()) {
                    validationErrors.push('industry');
                }
                
                if (!formData.get('employees') || !formData.get('employees').toString().trim()) {
                    validationErrors.push('company size');
                }
                
                if (!formData.get('country') || !formData.get('country').toString().trim()) {
                    validationErrors.push('country');
                }
                
                if (!formData.get('phone') || !formData.get('phone').toString().trim()) {
                    validationErrors.push('phone number');
                }
                
                if (!selectedPlanValue || !['starter', 'growth', 'professional', 'scale'].includes(selectedPlanValue)) {
                    validationErrors.push('plan selection');
                }
                
                if (!document.getElementById('terms')?.checked) {
                    validationErrors.push('terms');
                }
                
                if (!document.getElementById('privacy')?.checked) {
                    validationErrors.push('privacy');
                }
                
                // If there are validation errors, highlight them and stop submission
                if (validationErrors.length > 0) {
                    validationErrors.forEach(fieldName => {
                        highlightFieldError(fieldName);
                    });
                    
                    const errorList = validationErrors.map(f => f.replace(/_/g, ' ')).join(', ');
                    throw new Error(`Please fill in all required fields: ${errorList}`);
                }
                
                // ✅ BYPASS RATE LIMITS: Use Edge Function to avoid email rate limits
                const response = await fetch("https://yvbhjlmvpipniedwvdji.supabase.co/functions/v1/public-signup", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${supabaseKey}`
                    },
                    body: JSON.stringify({
                        selectedPlan: selectedPlanValue,
                        email: emailValue,
                        password: formData.get('password'),
                        org_id: orgId,  // Required by edge function
                        company_name: formData.get('companyName'),
                        industry: formData.get('industry'),
                        employees: formData.get('employees'),
                        country: formData.get('country'),
                        phone: formData.get('phone'),
                        first_name: formData.get('firstName'),
                        last_name: formData.get('lastName'),
                        surname: formData.get('lastName'),
                        // ✅ Legal acceptance (required)
                        terms_accepted: document.getElementById('terms')?.checked === true,
                        terms_version: '2026-01-08',
                        terms_accepted_at: new Date().toISOString(),
                        privacy_accepted: document.getElementById('privacy')?.checked === true,
                        privacy_version: '2026-01-08',
                        privacy_accepted_at: new Date().toISOString()
                    })
                });

                let data;
                let responseText = '';
                try {
                    // Get raw response text first for debugging
                    responseText = await response.clone().text();
                    console.log('Raw response text:', responseText);
                    console.log('Response headers:', Object.fromEntries(response.headers.entries()));
                    
                    // Try to parse as JSON
                    data = await response.json();
                } catch (parseError) {
                    // If response isn't JSON, use the text we already got
                    console.error('Failed to parse JSON response:', parseError);
                    console.error('Response text was:', responseText);
                    throw new Error(`Server error: ${responseText || response.statusText || 'Unknown error'}`);
                }
                
                if (!response.ok) {
                    // Use details if available, otherwise error, otherwise default message
                    const errorMessage = data.details || data.error || `Failed to create account (${response.status})`;
                    console.error('Signup error response:', {
                        status: response.status,
                        statusText: response.statusText,
                        data: data,
                        rawText: responseText,
                        errorCode: data.errorCode,
                        errorHint: data.errorHint,
                        errorDetails: data.errorDetails,
                        debug: data.debug
                    });
                    
                    // Parse error message to identify missing fields
                    const errorText = errorMessage.toLowerCase();
                    
                    // Check for "Missing required fields" pattern
                    if (errorText.includes('missing required fields') || errorText.includes('missing required field')) {
                        // Extract field names from error message
                        const missingFieldsMatch = errorMessage.match(/missing required fields?:\s*([^.]+)/i);
                        if (missingFieldsMatch) {
                            const fieldsList = missingFieldsMatch[1];
                            // Split by comma and clean up field names
                            const fields = fieldsList.split(',').map(f => f.trim().toLowerCase());
                            
                            // Highlight each missing field
                            fields.forEach(fieldName => {
                                highlightFieldError(fieldName);
                            });
                        }
                    }
                    
                    // Check for specific validation errors
                    if (errorText.includes('invalid email') || errorText.includes('email format')) {
                        highlightFieldError('email');
                    }
                    if (errorText.includes('password') && (errorText.includes('weak') || errorText.includes('security requirements') || errorText.includes('does not meet'))) {
                        highlightFieldError('password');
                        // Show specific password requirements error
                        const passwordField = document.getElementById('password');
                        if (passwordField) {
                            const existingError = passwordField.parentElement?.querySelector('.error-message');
                            if (existingError) {
                                existingError.textContent = errorMessage.includes('details') ? data.details || errorMessage : errorMessage;
                            } else {
                                const errorMsg = document.createElement('p');
                                errorMsg.className = 'error-message';
                                errorMsg.textContent = data.details || errorMessage;
                                passwordField.parentElement?.appendChild(errorMsg);
                            }
                        }
                    }
                    if (errorText.includes('terms not accepted') || errorText.includes('must accept')) {
                        highlightFieldError('terms');
                        highlightFieldError('privacy');
                    }
                    if (errorText.includes('already registered') || errorText.includes('email already exists')) {
                        highlightFieldError('email');
                    }
                    
                    throw new Error(errorMessage);
                }
                
                // Notify support of new signup (fire-and-forget; do not block UX)
                try {
                    fetch('/api/signup-notify', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            email: emailValue,
                            org_name: formData.get('companyName'),
                            company_name: formData.get('companyName'),
                            full_name: [formData.get('firstName'), formData.get('lastName')].filter(Boolean).join(' ').trim(),
                            first_name: formData.get('firstName'),
                            last_name: formData.get('lastName'),
                            phone: formData.get('phone'),
                            industry: formData.get('industry'),
                            employees: formData.get('employees'),
                            country: formData.get('country'),
                            selected_plan: selectedPlanValue,
                            signup_source: 'website_signup',
                            terms_accepted: document.getElementById('terms')?.checked === true,
                            terms_version: '2026-01-08',
                            terms_accepted_at: new Date().toISOString(),
                            privacy_accepted: document.getElementById('privacy')?.checked === true,
                            privacy_version: '2026-01-08',
                            privacy_accepted_at: new Date().toISOString()
                        })
                    }).catch(function() {});
                } catch (e) {}

                // ✅ SUCCESS: Account created with organization (no email confirmation required)
                messageDiv.className = 'p-4 rounded-lg bg-green-500/20 border border-green-500/30';
                messageDiv.innerHTML = `
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <i data-lucide="check-circle" class="text-green-500" style="width:20px;height:20px"></i>
                            <div class="flex-1">
                                <p class="text-green-400 font-semibold">Account created!</p>
                                <p class="text-green-300 text-sm mt-1">You can sign in now using ${emailValue} and your password.</p>
                            </div>
                        </div>
                        <div class="pt-2">
                            <a href="https://app.flowiq.info/login" class="inline-flex items-center justify-center w-full bg-freight-orange hover:bg-freight-orange-dark text-white py-2.5 px-4 rounded-lg font-semibold text-sm transition-all transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-freight-orange/20">
                                <i data-lucide="log-in" class="mr-2" style="width:16px;height:16px"></i>
                                Go to Sign In
                            </a>
                        </div>
                    </div>
                `;
                messageDiv.classList.remove('hidden');
                
                // Re-initialize Lucide icons for the new content
                if (window.lucide) { window.lucide.createIcons(); }
                
                // Reset form
                this.reset();
                // No auto-login / no auto-redirect: user explicitly clicks "Go to Sign In".

            } catch (error) {
                console.error('Signup error:', error);
                
                // Show error
                messageDiv.className = 'p-4 rounded-lg bg-red-500/20 border border-red-500/30';
                messageDiv.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <i data-lucide="alert-circle" class="text-red-500" style="width:20px;height:20px"></i>
                        <div>
                            <p class="text-red-400 font-semibold">Error Creating Account</p>
                            <p class="text-red-300 text-sm mt-1">${error.message}</p>
                        </div>
                    </div>
                `;
                messageDiv.classList.remove('hidden');
            } finally {
                // Reset button state
                submitButton.disabled = false;
                // Respect selected plan label after submission attempt
                const planFromState = (document.getElementById('selectedPlan')?.value || '').toLowerCase();
                const planToCta = {
                    starter: 'Start Starter Free Trial',
                    growth: 'Start Growth Free Trial',
                    professional: 'Start Professional Free Trial',
                    scale: 'Start Scale Free Trial'
                };
                buttonText.textContent = planToCta[planFromState] || 'Start Your Free Trial';
                loadingSpinner.classList.add('hidden');
                
                if (window.lucide) { window.lucide.createIcons(); }
            }
            });
        });
    </script>
</body>
</html>
